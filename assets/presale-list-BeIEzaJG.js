try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ecf88722-9bd0-48c8-9d25-42993666a3eb",e._sentryDebugIdIdentifier="sentry-dbid-ecf88722-9bd0-48c8-9d25-42993666a3eb")}catch(l){}import{_ as e,u as t,g as s,k as r,r as a}from"./index-OdOCjMiI.js";import{n as i,a as o}from"./nav-Ck_lkINx.js";import"./call-bind-BFQqbmjp.js";import"./@alpinejs/resize-CO1KAvJ_.js";import"./alpinejs-D043VxOM.js";import"./pinecone-router-DyexUCCX.js";import"./posthog-js-CcaH5niV.js";import"./node-polyglot-DlDlDF9m.js";import"./object.entries-DoVD67HD.js";import"./define-properties-JTyBPjo4.js";import"./object-keys-2-4LXbPU.js";import"./define-data-property-Dhkuw5U5.js";import"./es-define-property-BWOk23UV.js";import"./es-errors-CDnSFAF0.js";import"./gopd-DyUmdEtY.js";import"./has-property-descriptors-DsFaFEFP.js";import"./es-object-atoms-DlYjuSOe.js";import"./call-bound-BNSK0NEA.js";import"./get-intrinsic-Cxr_xTZv.js";import"./math-intrinsics-BRbcxSny.js";import"./has-symbols-B2_RGGVc.js";import"./get-proto-BRVA0OAU.js";import"./dunder-proto-DMCSAdn6.js";import"./call-bind-apply-helpers-BSpli2uY.js";import"./function-bind-DR49pCHT.js";import"./hasown-NUnpZb-C.js";import"./warning-Bp1nZ229.js";import"./@sentry/browser-Bk1Xewov.js";import"./@sentry/core-CnjMJUhl.js";import"./@sentry-internal/browser-utils-BUixo4nC.js";import"./@sentry-internal/replay-yt77ihwD.js";import"./set-function-length-BuPlcIl4.js";import"./config.service-YGUPWIw7.js";import"./flowbite-Ln6Jbqyc.js";import"./@popperjs/core-IAo43KLY.js";import"./flowbite-datepicker-D6bDqdY1.js";const n={name:()=>"presaleList",template:()=>e((()=>import("./presale-list-BXhCqfJA.js")),[]),data:()=>({user:null,empresa:null,nav:null,aside:null,loading:!0,presales:null,vendedores:null,paginationMetaData:null,entriesPerPage:10,entriesStorageKey:"isiparts.presale.entries-per-page",pageInfo:"",columnSortKey:"pre",sortOrder:"desc",currentPage:1,currentTab:0,vendedorName(e){var t;const s=null==(t=this.vendedores)?void 0:t.find((t=>t.ven===e));return(null==s?void 0:s.raz)||""},async init(){console.log("presaleList@init");try{this.user=await s(),this.empresa=await r(this.user.empOmi)}catch(e){location.href="/login?redirect=/potencial/list"}this.nav=await a(i),this.aside=await a(o),this.loading=!1,this.entriesPerPage=localStorage.getItem(this.entriesStorageKey)??10,await Promise.all([this.loadPresales(),this.loadVendedores()])},async loadPresales(){this.loading=!0;const e=`isiWeb/web/v1/empresas/01/presuntos?page=${this.currentPage}&pageSize=${this.entriesPerPage}&sort=${this.columnSortKey}&order=${this.sortOrder}&esCliente=false`;let s="";switch(this.currentTab){case 0:s=`${e}&conf:ne=false`;break;case 1:s=`${e}&conf:ne=false&conf:ne=true`;break;case 2:s=`${e}&conf:eq=true`}try{const e=await fetch(t(s),{credentials:"include",headers:{"Content-Type":"application/json"},method:"GET"});if(!e.ok)throw new Error(this.$t("Error loading presales"));const r=await e.json();this.presales=r.data,this.paginationMetaData=r.meta;const a=(this.currentPage-1)*this.entriesPerPage+1,i=Math.min(this.currentPage*this.entriesPerPage,this.paginationMetaData.totalRows);this.pageInfo=`Mostrando ${a} a ${i} de ${this.paginationMetaData.totalRows} registros`}catch(r){console.error(r)}this.loading=!1},async sortPresales(e){this.columnSortKey=e,this.sortOrder="asc"===this.sortOrder?"desc":"asc",await this.loadPresales()},async changeTab(){this.currentPage=1,await this.loadPresales()},async changeEntriesPerPage(){this.currentPage=1,localStorage.setItem(this.entriesStorageKey,this.entriesPerPage),await this.loadPresales()},async nextPage(){this.currentPage++,await this.loadPresales()},async prevPage(){this.currentPage--,await this.loadPresales()},async loadVendedores(){try{const e=await fetch(t("isiWeb/web/v1/empresas/01/vendedores"),{credentials:"include",headers:{"Content-Type":"application/json"},method:"GET"});if(!e.ok)throw new Error(this.$t("Error loading presale vendedor"));const s=await e.json();this.vendedores=s.data}catch(e){console.error(e)}}})};export{n as default};
//# sourceMappingURL=presale-list-BeIEzaJG.js.map
