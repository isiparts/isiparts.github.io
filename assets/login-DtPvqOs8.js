try{let t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new t.Error).stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="24504d1d-058b-4839-bacc-7b085cdea278",t._sentryDebugIdIdentifier="sentry-dbid-24504d1d-058b-4839-bacc-7b085cdea278")}catch(l){}import{_ as t,a as s,T as i,b as e,l as o,i as r}from"./index-OdOCjMiI.js";import"./call-bind-BFQqbmjp.js";import"./@alpinejs/resize-CO1KAvJ_.js";import"./alpinejs-D043VxOM.js";import"./pinecone-router-DyexUCCX.js";import"./posthog-js-CcaH5niV.js";import"./node-polyglot-DlDlDF9m.js";import"./object.entries-DoVD67HD.js";import"./define-properties-JTyBPjo4.js";import"./object-keys-2-4LXbPU.js";import"./define-data-property-Dhkuw5U5.js";import"./es-define-property-BWOk23UV.js";import"./es-errors-CDnSFAF0.js";import"./gopd-DyUmdEtY.js";import"./has-property-descriptors-DsFaFEFP.js";import"./es-object-atoms-DlYjuSOe.js";import"./call-bound-BNSK0NEA.js";import"./get-intrinsic-Cxr_xTZv.js";import"./math-intrinsics-BRbcxSny.js";import"./has-symbols-B2_RGGVc.js";import"./get-proto-BRVA0OAU.js";import"./dunder-proto-DMCSAdn6.js";import"./call-bind-apply-helpers-BSpli2uY.js";import"./function-bind-DR49pCHT.js";import"./hasown-NUnpZb-C.js";import"./warning-Bp1nZ229.js";import"./@sentry/browser-Bk1Xewov.js";import"./@sentry/core-CnjMJUhl.js";import"./@sentry-internal/browser-utils-BUixo4nC.js";import"./@sentry-internal/replay-yt77ihwD.js";import"./set-function-length-BuPlcIl4.js";var n=(t=>(t[t.DISABLED=0]="DISABLED",t[t.USER_PASSWORD=1]="USER_PASSWORD",t))(n||{});const a={name:()=>"login",template:()=>t((()=>import("./login-DuHOydh5.js")),[]),data:()=>({loading:!0,submitting:!1,async init(){console.log("login@init"),await this.handleSSORequest();const t=await r();if(t){const t=new URLSearchParams(window.location.search);this.$router.navigate(t.get("redirect")||"/")}this.loading=t},async handleSSORequest(){const t=new URLSearchParams(window.location.search);if(Number.parseInt(t.get("sso")||"0")===n.USER_PASSWORD){this.loading=!0,await o();const s=t.get("username")??"",i=t.get("password")??"";await this.login(s,i)}},async submit(t){var s,o,r,n;try{console.log("login@submit"),this.submitting=!0;const i=null==(o=null==(s=t.target)?void 0:s.username)?void 0:o.value,e=null==(n=null==(r=t.target)?void 0:r.password)?void 0:n.value;if(!i||!e)throw new Error(this.$t("AUTH.username_and_password_required"));await this.login(i,e)}catch(a){console.error(a),this.$dispatch(i,{msg:this.$t(a.toString()),level:e}),this.submitting=!1}},async login(t,o){const{success:r,user:n,message:a}=await s(t,o);this.$nextTick((()=>{if(console.log("login@isAuthenticated",n),!r)return this.$dispatch(i,{msg:this.$t(a),level:e}),void(this.submitting=!1);const t=new URLSearchParams(window.location.search);this.$router.navigate(t.get("redirect")||"/")}))}})};export{a as default};
//# sourceMappingURL=login-DtPvqOs8.js.map
