{"version":3,"mappings":"sfAIA,MAAeA,EAAA,CACXC,KAAM,IAAM,YACZC,SAAU,IAAMC,GAAA,IAAAC,OAAO,4BAAsBC,IAC7CC,KAAM,KAAO,CACTN,UAAW,KACXO,MAAO,IACPC,OAAQ,IACR,IAAAC,GACIC,QAAQC,IAAI,kBAEZC,KAAKC,WAAU,aACL,MAAAC,EAASF,KAAKG,MAAMC,gBAE1B,GAAe,OAAXF,EACA,OAGE,MAAAG,EAA6BH,EAAOI,QAAQ,oBAElD,GAAe,OAAXD,EACA,OAGJ,MAAME,EAAiBC,OAAOC,UAAS,OAAAC,IAAOC,cAAP,EAAAD,EAAgBH,iBAAkB,eACpEC,OAAOI,MAAML,KACdP,KAAKL,MAAQY,GAGjB,MAAMM,EAAkBL,OAAOC,UAAS,OAAAK,IAAOH,cAAP,EAAAG,EAAgBD,kBAAmB,eACtEL,OAAOI,MAAMC,KACdb,KAAKJ,OAASiB,GAGlBX,EAAOP,MAAQK,KAAKL,MACpBO,EAAON,OAASI,KAAKJ,OAEhBI,KAAAZ,UAAY,IAAI2B,EAAab,EAAQ,CACtCc,gBAAiB,uBAGrBhB,KAAKZ,UAAU6B,iBACX,aACA,KACQ,OAASZ,GAAWL,KAAKZ,UAAU8B,WACnClB,KAAKmB,UAAUC,EAAgB,CAC3BC,IAAKhB,EAAOM,QAAQvB,UACpBkC,MAAOtB,KAAKZ,UAAUmC,UAAU,aAAc,IACjD,GAGT,CAAEC,MAAM,IAILC,OAAAR,iBAAiBS,GAAsBC,IAC1C3B,KAAKZ,UAAUwC,OAAM,GACxB,GACJ","names":["signature","name","template","__vitePreload","import","__VITE_PRELOAD__","data","width","height","init","console","log","this","$nextTick","canvas","$refs","signatureCanvas","parent","closest","signatureWidth","Number","parseInt","_a","dataset","isNaN","signatureHeight","_b","SignaturePad","backgroundColor","addEventListener","isEmpty","$dispatch","SIGNATURE_SAVE","key","value","toDataURL","once","window","SIGNATURE_CLEAR_ALL","e","clear"],"ignoreList":[],"sources":["../../src/components/shared/signature/signature.ts"],"sourcesContent":["import { ComponentModule } from '@/main';\nimport { SIGNATURE_CLEAR_ALL, SIGNATURE_SAVE } from '@/models/events';\nimport SignaturePad from 'signature_pad';\n\nexport default {\n    name: () => 'signature',\n    template: () => import('./signature.html?raw'),\n    data: () => ({\n        signature: null as SignaturePad | null,\n        width: 300,\n        height: 150,\n        init() {\n            console.log('signature@init');\n\n            this.$nextTick(() => {\n                const canvas = this.$refs.signatureCanvas as HTMLCanvasElement | null;\n\n                if (canvas === null) {\n                    return;\n                }\n\n                const parent: HTMLElement | null = canvas.closest('[data-signature]');\n\n                if (parent === null) {\n                    return;\n                }\n\n                const signatureWidth = Number.parseInt(parent.dataset?.signatureWidth || 'not defined');\n                if (!Number.isNaN(signatureWidth)) {\n                    this.width = signatureWidth;\n                }\n\n                const signatureHeight = Number.parseInt(parent.dataset?.signatureHeight || 'not defined');\n                if (!Number.isNaN(signatureHeight)) {\n                    this.height = signatureHeight;\n                }\n\n                canvas.width = this.width;\n                canvas.height = this.height;\n\n                this.signature = new SignaturePad(canvas, {\n                    backgroundColor: 'rgb(255, 255, 255)',\n                });\n\n                this.signature.addEventListener(\n                    'endStroke',\n                    () => {\n                        if (null !== parent && !this.signature.isEmpty()) {\n                            this.$dispatch(SIGNATURE_SAVE, {\n                                key: parent.dataset.signature,\n                                value: this.signature.toDataURL('image/jpeg', 1.0),\n                            });\n                        }\n                    },\n                    { once: false },\n                );\n\n                // @ts-expect-error 2769\n                window.addEventListener(SIGNATURE_CLEAR_ALL, (e: CustomEvent) => {\n                    this.signature.clear();\n                });\n            });\n        },\n    }),\n} as ComponentModule<{\n    width: number;\n    height: number;\n    signature: SignaturePad;\n}>;\n"],"file":"assets/signature-DTZB7ssX.js"}