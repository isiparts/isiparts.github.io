const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-DHYmB_bx.js","assets/nav-Ck_lkINx.js","assets/config.service-YGUPWIw7.js","assets/call-bind-BFQqbmjp.js","assets/set-function-length-BuPlcIl4.js","assets/get-intrinsic-Cxr_xTZv.js","assets/es-object-atoms-DlYjuSOe.js","assets/es-errors-CDnSFAF0.js","assets/math-intrinsics-BRbcxSny.js","assets/gopd-DyUmdEtY.js","assets/es-define-property-BWOk23UV.js","assets/has-symbols-B2_RGGVc.js","assets/get-proto-BRVA0OAU.js","assets/dunder-proto-DMCSAdn6.js","assets/call-bind-apply-helpers-BSpli2uY.js","assets/function-bind-DR49pCHT.js","assets/hasown-NUnpZb-C.js","assets/define-data-property-Dhkuw5U5.js","assets/has-property-descriptors-DsFaFEFP.js","assets/flowbite-Ln6Jbqyc.js","assets/@popperjs/core-IAo43KLY.js","assets/flowbite-datepicker-D6bDqdY1.js","assets/@alpinejs/resize-CO1KAvJ_.js","assets/alpinejs-D043VxOM.js","assets/pinecone-router-DyexUCCX.js","assets/posthog-js-CcaH5niV.js","assets/node-polyglot-DlDlDF9m.js","assets/object.entries-DoVD67HD.js","assets/define-properties-JTyBPjo4.js","assets/object-keys-2-4LXbPU.js","assets/call-bound-BNSK0NEA.js","assets/warning-Bp1nZ229.js","assets/@sentry/browser-Bk1Xewov.js","assets/@sentry/core-CnjMJUhl.js","assets/@sentry-internal/browser-utils-BUixo4nC.js","assets/@sentry-internal/replay-yt77ihwD.js","assets/login-DtPvqOs8.js","assets/work-order-list-15sqdva8.js","assets/work-order-new-D66ioN4m.js","assets/mec-B1V75Ai1.js","assets/work-order-edit-DgAQX4aj.js","assets/signature-DTZB7ssX.js","assets/signature_pad-eDKSxAXg.js","assets/presale-new-hso2XmcW.js","assets/presale-list-BeIEzaJG.js","assets/presale-edit-DR1DpPJf.js","assets/isisign-CSN1ts4j.js","assets/pusher-js-DKnSmxnV.js","assets/404-C5VJ9l2z.js","assets/toast-m8ooM7ng.js"])))=>i.map(i=>d[i]);
try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},o=(new e.Error).stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="e31ce758-6977-4935-bd16-8591aebd15f1",e._sentryDebugIdIdentifier="sentry-dbid-e31ce758-6977-4935-bd16-8591aebd15f1")}catch(U){}import"./call-bind-BFQqbmjp.js";import{m as e}from"./@alpinejs/resize-CO1KAvJ_.js";import{m as o}from"./alpinejs-D043VxOM.js";import{Y as t}from"./pinecone-router-DyexUCCX.js";import{s as a}from"./posthog-js-CcaH5niV.js";import{P as n}from"./node-polyglot-DlDlDF9m.js";import{i as r,b as i}from"./@sentry/browser-Bk1Xewov.js";import{r as s}from"./@sentry-internal/replay-yt77ihwD.js";import"./set-function-length-BuPlcIl4.js";import"./get-intrinsic-Cxr_xTZv.js";import"./es-object-atoms-DlYjuSOe.js";import"./es-errors-CDnSFAF0.js";import"./math-intrinsics-BRbcxSny.js";import"./gopd-DyUmdEtY.js";import"./es-define-property-BWOk23UV.js";import"./has-symbols-B2_RGGVc.js";import"./get-proto-BRVA0OAU.js";import"./dunder-proto-DMCSAdn6.js";import"./call-bind-apply-helpers-BSpli2uY.js";import"./function-bind-DR49pCHT.js";import"./hasown-NUnpZb-C.js";import"./define-data-property-Dhkuw5U5.js";import"./has-property-descriptors-DsFaFEFP.js";import"./object.entries-DoVD67HD.js";import"./define-properties-JTyBPjo4.js";import"./object-keys-2-4LXbPU.js";import"./call-bound-BNSK0NEA.js";import"./warning-Bp1nZ229.js";import"./@sentry/core-CnjMJUhl.js";import"./@sentry-internal/browser-utils-BUixo4nC.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&o(e)})).observe(document,{childList:!0,subtree:!0})}function o(e){if(e.ep)return;e.ep=!0;const o=function(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?o.credentials="include":"anonymous"===e.crossOrigin?o.credentials="omit":o.credentials="same-origin",o}(e);fetch(e.href,o)}}();const c={},l=function(e,o,t){let a=Promise.resolve();if(o&&o.length>0){let e=function(e){return Promise.all(e.map((e=>Promise.resolve(e).then((e=>({status:"fulfilled",value:e})),(e=>({status:"rejected",reason:e}))))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),n=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));a=e(o.map((e=>{if((e=function(e){return"/"+e}(e))in c)return;c[e]=!0;const o=e.endsWith(".css"),t=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const a=document.createElement("link");return a.rel=o?"stylesheet":"modulepreload",o||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),o?new Promise(((o,t)=>{a.addEventListener("load",o),a.addEventListener("error",(()=>t(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function n(e){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=e,window.dispatchEvent(o),!o.defaultPrevented)throw e}return a.then((o=>{for(const e of o||[])"rejected"===e.status&&n(e.reason);return e().catch(n)}))},d=[{path:"/",component:()=>l((()=>import("./home-DHYmB_bx.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/login",component:()=>l((()=>import("./login-DtPvqOs8.js")),__vite__mapDeps([36,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/or/list",component:()=>l((()=>import("./work-order-list-15sqdva8.js")),__vite__mapDeps([37,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/or/me",component:()=>l((()=>import("./work-order-list-15sqdva8.js")),__vite__mapDeps([37,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/or/new",component:()=>l((()=>import("./work-order-new-D66ioN4m.js")),__vite__mapDeps([38,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,39,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/or/:or/details",component:()=>l((()=>import("./work-order-edit-DgAQX4aj.js")),__vite__mapDeps([40,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,41,42,39,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/potencial/new",component:()=>l((()=>import("./presale-new-hso2XmcW.js")),__vite__mapDeps([43,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/potencial/list",component:()=>l((()=>import("./presale-list-BeIEzaJG.js")),__vite__mapDeps([44,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/potencial/edit/:pre",component:()=>l((()=>import("./presale-edit-DR1DpPJf.js")),__vite__mapDeps([45,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"/isisign",component:()=>l((()=>import("./isisign-CSN1ts4j.js")),__vite__mapDeps([46,41,42,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,2,47,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))},{path:"notfound",component:()=>l((()=>import("./404-C5VJ9l2z.js")),__vite__mapDeps([48,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,22,23,24,25,26,27,28,29,30,31,32,33,34,35]))}],p="signature:clear-all",u="signature:save",m="drawer:toggle",g="reference:init",h="reference:found",_="reference:not-found",f="reference:clear",w="reference:get",y="toast:trigger",b="pinecone:end",v={COMMON:{update:"Actualizar",add:"Añadir",confirm:"Confirmar",cancel:"Cancelar",today:"Hoy",yesterday:"Ayer",next:"Siguiente",previous:"Anterior",per_page:"por página",progress:"Progreso",priority:"Prioridad |||| Prioridades",status:"Estado |||| Estados",no_results:"No hay registros",save:"Guardar",select:"Seleccionar",validate:"Validar",name:"Nombre |||| Nombres",surname:"Apellido |||| Apellidos",email:"Email |||| Emails",phone:"Teléfono |||| Teléfonos",website:"Dirección web |||| Direcciones web",postal_code:"Código Postal |||| Códigos Postales",province:"Provincia |||| Provincias",province_select:"Seleccionar provincia |||| Seleccionar provincias",city:"Población |||| Poblaciones",city_select:"Seleccionar población |||| Seleccionar poblaciones",country:"País |||| Países",unassigned:"Sin asignar",observations:"Observación |||| Observaciones",address:"Dirección |||| Direcciones",shipment_address:"Dirección de envío |||| Direcciones de envío",vat_code:"Código IVA",payment_method:"Método de pago |||| Métodos de pago",billing_period:"Periodo de facturación |||| Periodos de facturación",file:"Archivo |||| Archivos",description:"Descripción |||| Descripciones",brand:"Marca |||| Marcas",family:"Familia |||| Familias"},REFERENCE:{reference:"Referencia |||| Referencias",select_reference:"Seleccionar referencia",reference_search:"Buscar referencia |||| Buscar referencias",use_filters_search:"Utiliza el filtro para buscar referencias |||| Utiliza los filtros para buscar referencias",not_found:"No se ha encontrado la referencia |||| No se encontraron referencias"},BANK:{bank_detail:"Dato bancarios |||| Datos bancarios",iban:"IBAN"},CLIENT:{client:"Cliente |||| Clientes",client_search:"Buscar cliente |||| Buscar clientes",client_name:"Nombre cliente",client_type:"Tipo cliente",cif:"CIF",business_name:"Razón Social",address:"Dirección |||| Direcciones",use_filters_search:"Utiliza el filtro para buscar clientes |||| Utiliza los filtros para buscar clientes",not_found:"No se ha encontrado el cliente |||| No se encontraron clientes"},MENU:{sat:"SAT",comercial:"Comercial",prospect:"Cliente potencial |||| Clientes potenciales",prospect_new:"Registro de cliente potencial |||| Registro de clientes potenciales",prospect_edit:"Modificar cliente potencial |||| Modificar clientes potenciales",work_order:"Orden de reparación |||| Órdenes de reparación"},AUTH:{login:"Acceder",username:"Usuario",password:"Password",logout:"Cerrar sesión",username_and_password_required:"Usuario y contraseña son obligatorios",username_or_password_invalid:"Usuario o contraseña inválidos"},PROSPECTS:{prospect:"Cliente potencial |||| Clientes potenciales",prospect_code:"Código cliente potencial",prospect_date:"Fecha alta",prospect_new:"Alta cliente potencial |||| Alta clientes potenciales",legal_entity:"Persona Jurídica",legal_entity_abbr:"P. Jurídica",vat_by:"IVA por",payment_day:"Día de pago |||| Días de pago",delivery_note_or_invoice:"Un albarán/Una factura en facturación de crédito",send_digital_invoice:"Enviar factura electrónica",send_invoice_email:"Enviar factura por e-mail",billing_email:"E-mail facturación",risk_amount:"Importe riesgo concedido",risk_amount_abbr:"Imp. riesgo conc.",activity:"Actividad",assigned_salesperson:"Comercial asignado",selling_zone:"Zona de venta",company_type:"Tipo de empresa",debt_collector:"Cobrador",validate:"Validar cliente potencial",total:"Todos",pending:"Pendiente de validación |||| Pendientes de validación",closed:"Validado |||| Validados",seller:"Vendedor |||| Vendedores",agent:"Agente validador |||| Agentes validadores",validation_date:"Fecha validación"},WORKORDERS:{work_order:"Orden de reparación |||| Órdenes de reparación",work_order_abbr:"OR |||| ORs",total:"Total",pending:"Abierta |||| Abiertas",closed:"Cerrada |||| Cerradas",doc_date_abbr:"Fecha Doc.",doc_date:"Fecha Documento",all:"Todas",new:"Alta de orden de reparación",select_client:"Seleccione un cliente",or_not_found:"OR no encontrada |||| ORs no encontradas",mec_not_found:"Mecánico no encontrado |||| Mecánicos no encontrados",material_not_found:"Material no encontrado |||| Materiales no encontrados",min_quantity_gt_zero:"La cantidad mínima debe ser mayor que 0"},NOTFOUND:{not_found:"No se ha encontrado la página solicitada",not_found_description:"Lo sentimos, no se ha encontrado la página solicitada. Puedes volver a la página de inicio o buscar otra página.",go_home:"Ir a la página de inicio"}},E=new Map;[{locale:"es",values:v,options:{}}].forEach((e=>{const o=new n(e.options);o.extend(e.values),E.set(e.locale,o)}));const j=(e,o=1)=>((e,o,t=1)=>{var a;return(null==(a=E.get(o))?void 0:a.t(e.trim(),{smart_count:t}))??e})(e,"es",o),P="version",A=e=>`${window.apiHost}${e.startsWith("/")?e:`/${e}`}`,T=async e=>{try{const o=`_companyGlobalData_${e}`,t=window.cache.get(o);if(t)return console.log("getCompanyGlobalData@cache",t),t;console.log("getCompanyGlobalData@fetch");const a=await fetch(A(`/isiWeb/web/v1/empresas/${e}/global-data`),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(!a.ok)throw new Error(j(`Company ${e} global data response status not OK: ${a.status}`));const n=await a.json(),r=n.data;if(!r){const o=new Error(`Company ${e} global data could not be retrieved`);throw console.error(o.message,n),o}return window.cache.set(o,r),console.log("getCompanyGlobalData@cache set",r),r}catch(o){throw console.error("Failed to get company global data",o),o}},D=async()=>{try{const e=await fetch("/version.json",{method:"GET"});if(!e.ok)throw new Error(j(`Version response status not OK: ${e.status}`));return await e.json()}catch(e){return console.error("Failed to get version",e),""}},O=()=>{let e="https://dev-api.isiparts.com:8443";const o=window.location.hostname.match(/^(.*?)\.isiparts\.com$/i);return null!==o&&o.length>1&&(e=`https://${o[1]}-api.isiparts.com:8443`),e},R="success",C="error",S=async()=>(await fetch(A("/isiWeb/web/v1/keep-alive"),{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"}})).ok,I=async()=>{var e;const o=await S();console.log("auth@handleAuthenticationRoutes loggedIn",o),M().loading="/login"!==(null==(e=window.PineconeRouter.context.route)?void 0:e.name)&&!o},k=async()=>{try{const e="_globalData",o=window.cache.get(e);if(o)return console.log("getAuthenticatedUser@cache",o),o;console.log("getAuthenticatedUser@fetch");const t=await fetch(A("/isiWeb/web/v1/global-data"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(console.log("getAuthenticatedUser@response",t),!t.ok)throw new Error(j(`Global data response status not OK: ${t.status}`));const a=await t.json();console.log("getAuthenticatedUser@response JSON",a);const n=a.data;if(!n){const e=new Error("Global data could not be retrieved");throw console.error(e.message,a),e}return window.cache.set(e,n),console.log("getAuthenticatedUser@cache set",n),n}catch(e){throw console.error("Failed to get global data",e),e}},L=async(e,o)=>{console.log("auth@authenticate"),window.cache.clear();try{const n=new URLSearchParams;n.set("j_username",e),n.set("j_password",o);const r=await fetch(A("/isiWeb/static/auth/j_spring_security_check"),{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n,credentials:"include"});if(!r.ok)throw new Error(j(401===r.status?"username_or_password_invalid":r.statusText));setTimeout((()=>{console.log("auth@authenticate ensure cookie is set")}),300);const i=await k();if(console.log("authenticate@user",i),i)try{a.identify(i.usuario,i)}catch(t){console.warn("Posthog identify failed",t)}return{success:null!==i,user:i,message:r.statusText}}catch(t){return console.warn("auth@authenticate error",t),window.dispatchEvent(new CustomEvent(y,{detail:{msg:t.toString(),level:C}})),{success:!1,user:null,message:t}}},N=async()=>{console.log("auth@logout");if(200!==(await fetch(A("/isiWeb/static/auth/j_spring_security_logout"),{method:"POST",credentials:"include"})).status)throw new Error(j("Logout failed"));setTimeout((()=>{console.log("auth@authenticate ensure cookie is unset")}),300);try{a.reset()}catch(e){console.warn("Posthog reset failed",e)}localStorage.removeItem("_version"),window.cache.clear()},V=async(e,t=void 0)=>{const a=void 0!==e.default?e.default:e,n=void 0===a.name?"":a.name();if(o.data(n,a.data),a.styles&&await a.styles(),void 0===a.template)return console.warn("Template not found!",a),"";const r=`<div x-data="${n}">${(await a.template()).default}</div>`;return t?`<template x-template x-route="${t}">${r}</template>`:r};const $=(e="#app")=>{const o=document.querySelector(e);if(!o)throw console.error(`${e} not found!`),new Error(`${e} not found!`);return o},M=()=>o.$data($());(async function(){let e="";await Promise.all(d.map((async o=>{const{path:t,component:a}=o,n=await V(await a(),t);e+=n})));const o=await l((()=>import("./toast-m8ooM7ng.js")),__vite__mapDeps([49,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,22,23,24,25,26,27,28,29,30,31,32,33,34,35]));return e+=await V(o),void 0===window.cache&&(window.cache=new Map),Promise.resolve(e)})().then((n=>{console.info("MODE","production"),window.apiHost=O(),r({dsn:"https://0825b8d53e7694ba827b2c18d224c96b@o4508256865812480.ingest.de.sentry.io/4508256869613648",integrations:[i(),s()],tracesSampleRate:1,tracePropagationTargets:[/^https?:\/\/([a-z0-9]+\.)*isiparts\.com/,/^https?:\/\/([a-z0-9]+\.)*isiparts\.pages\.dev/],replaysSessionSampleRate:1,replaysOnErrorSampleRate:1}),a.init("phc_3y02C4cuEDWvSdN1HfhBJ7x4eSOooPJVPirZh6azFNt",{api_host:"https://eu.i.posthog.com",person_profiles:"identified_only"});$().innerHTML=n,o.plugin(t),o.plugin(e),o.magic("t",(()=>(e,o)=>j(e,o))),window.Alpine=o,o.start(),(async()=>{setInterval((async()=>{try{const e=await fetch(A("/isiWeb/web/v1/keep-alive"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(console.log("keepAlive@response",e),!e.ok)throw new Error(j(`Keep-Alive response status not OK: ${e.status}`))}catch(e){console.error("Failed to keep alive",e)}}),3e5)})(),(async()=>{const e=await D();sessionStorage.getItem(P)||sessionStorage.setItem(P,e),console.log("Current version",e),document.addEventListener(b,(async()=>{const e=await D();console.log("Page visited",window.PineconeRouter.context.path),sessionStorage.getItem(P)!==e&&(console.log("Version mismatch, reloading"),sessionStorage.setItem(P,e),setTimeout((()=>{console.log("Redirecting timeout"),window.location.href=window.PineconeRouter.context.path}),300))}))})(),(async()=>{console.log("auth@handleAuthenticationRoutes init"),await I(),document.addEventListener(b,(async()=>{console.log("auth@handleAuthenticationRoutes page visit",window.PineconeRouter.context),await I()}))})()}));export{m as D,b as P,_ as R,p as S,y as T,l as _,L as a,C as b,h as c,g as d,w as e,f,k as g,R as h,S as i,u as j,T as k,N as l,O as m,V as r,j as t,A as u};
//# sourceMappingURL=index-OdOCjMiI.js.map
