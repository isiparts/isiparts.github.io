try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},o=(new e.Error).stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="814e771b-9eb6-466f-8406-d00fd15c9409",e._sentryDebugIdIdentifier="sentry-dbid-814e771b-9eb6-466f-8406-d00fd15c9409")}catch(f){}import{u as e,t as o,_ as t,g as i,k as a,D as s,l as n,r}from"./index-OdOCjMiI.js";import{l}from"./config.service-YGUPWIw7.js";import"./call-bind-BFQqbmjp.js";import{D as d,a as c}from"./flowbite-Ln6Jbqyc.js";const g=1024,h={name:()=>"aside",template:()=>t((()=>import("./aside-LDamkBeh.js")),[]),data:()=>({loading:!1,user:null,empresa:null,drawer:null,menu:[],async init(){console.log("aside@init");try{this.user=await i(),this.empresa=await a(this.user.empOmi),this.menu=await(async()=>{const t="_menuItems",i=window.cache.get(t);if(i)return console.log("getMenuItems@cache",i),i;console.log("getMenuItems@fetch");const a=await fetch(e("/isiWeb/web/v1/menu"),{credentials:"include"});if(!a.ok)throw new Error(o(`Menu response status not OK: ${a.status}`));let s=(await a.json()).data;return 0===s.length&&(s=l().aside.defaultMenu),s=s.map((e=>(e.route&&(e.route=e.route.toLowerCase().replace("presunto","potencial").replace("modify","list")),e))),window.cache.set(t,s),console.log("getMenuItems@cache set",s),s})()}catch(t){location.href="/login"}this.drawer=new d(this.$refs.drawerNavigation,{placement:"left",backdrop:!1,bodyScrolling:!0,edge:!1,edgeOffset:"",onHide:()=>{console.log("drawer is hidden")},onShow:()=>{console.log("drawer is shown")},onToggle:()=>{console.log("drawer has been toggled")}}),this.$nextTick((()=>{var e,o;window.innerWidth>=g&&(null==(e=this.drawer)||e.show()),console.log("aside drawer visible status",null==(o=this.drawer)?void 0:o.isVisible()),window.onresize=()=>{var e,o;window.innerWidth>=g&&(null==(e=this.drawer)||e.show()),window.innerWidth<g&&(null==(o=this.drawer)||o.hide())},window.addEventListener(s,(e=>{var o;"drawerNavigation"===e.detail&&(null==(o=this.drawer)||o.toggle())}))}))}})},w={name:()=>"avatar",template:()=>t((()=>import("./avatar-V9z8CaIf.js")),[]),data:()=>({loading:!1,user:null,img:"https://ui-avatars.com/api/?size=1&color=fff&background=fff",async init(){console.log("avatar@init");try{this.user=await i()}catch(s){return}const o="_avatarUrl";if(window.cache.has(o))return void(this.img=window.cache.get(o));const t=e(`/isiWeb/web/v1/profile-image?user=${this.user.usuario}`),a=`https://ui-avatars.com/api/?size=48&color=ed772d&background=ffffff&name=${this.user.nombre}`;try{const e=await fetch(t,{credentials:"include"});this.img=e.ok?t:a,window.cache.set(o,this.img)}catch(s){this.img=a,window.cache.set(o,this.img)}}})},u={name:()=>"nav",template:()=>t((()=>import("./nav-BOARdjBs.js")),[]),data:()=>({loading:!1,avatar:null,user:null,empresa:null,async init(){console.log("nav@init");try{this.user=await i(),this.empresa=await a(this.user.empOmi)}catch(e){location.href="/login"}this.avatar=await r(w),this.configureUserDropdown()},async logout(){console.log("nav@logout"),this.loading=!0;try{await n(),this.$router.navigate("/login")}catch(e){console.error("Error logging out",e)}this.loading=!1},configureUserDropdown(){new c(this.$refs.dropdown,this.$refs.dropdownTrigger,{placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1,onHide:()=>{console.log("dropdown has been hidden")},onShow:()=>{console.log("dropdown has been shown")},onToggle:()=>{console.log("dropdown has been toggled")}})}})};export{h as a,u as n};
//# sourceMappingURL=nav-Ck_lkINx.js.map
