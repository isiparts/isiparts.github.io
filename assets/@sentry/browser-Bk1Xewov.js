try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="edf3f04a-492d-4180-8f31-83960e947dde",e._sentryDebugIdIdentifier="sentry-dbid-edf3f04a-492d-4180-8f31-83960e947dde")}catch(an){}import{G as e,O as t,_ as n,$ as r,v as a,a0 as s,a1 as o,a2 as i,X as c,a3 as u,a4 as d,a5 as l,a6 as p,a7 as m,a8 as f,a9 as h,a as g,aa as v,ab as y,L as _,ac as b,ad as S,ae as T,af as x,ag as E,ah as k,ai as w,aj as R,ak as P,al as q,am as O,an as L,ao as A,ap as C,Y as D,aq as $,l as I,i as F,o as H,ar as M,Z as j,p as N,u as B,g as U,as as W,at as X,au as z,av as Y,aw as G,ax as K,B as J,ay as V,az as Q,aA as Z,aB as ee,E as te,aC as ne,aD as re,aE as ae,aF as se,aG as oe,s as ie,f as ce,aH as ue,aI as de,aJ as le,d as pe,c as me,k as fe,m as he,aK as ge,aL as ve,V as ye,e as _e,aM as be,b as Se,aN as Te,aO as xe,aP as Ee,aQ as ke,aR as we,Q as Re,aS as Pe,aT as qe,aU as Oe,F as Le,aV as Ae,H as Ce,aW as De,aX as $e}from"./core-CnjMJUhl.js";import{k as Ie,l as Fe,a as He,m as Me,b as je,S as Ne,c as Be,n as Ue,o as We,p as Xe,q as ze,r as Ye,t as Ge,u as Ke,v as Je}from"../@sentry-internal/browser-utils-BUixo4nC.js";const Ve=e;let Qe=0;function Ze(){return Qe>0}function et(e,t={}){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(n(e))return e}catch(an){return e}const u=function(...n){try{const r=n.map((e=>et(e,t)));return e.apply(this,r)}catch(r){throw Qe++,setTimeout((()=>{Qe--})),s((e=>{e.addEventProcessor((e=>(t.mechanism&&(o(e,void 0),i(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),c(r)})),r}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(u[t]=e[t])}catch{}r(u,e),a(e,"__sentry_wrapped__",u);try{Object.getOwnPropertyDescriptor(u,"name").configurable&&Object.defineProperty(u,"name",{get:()=>e.name})}catch{}return u}function tt(){const e=t(),{referrer:n}=Ve.document||{},{userAgent:r}=Ve.navigator||{};return{url:e,headers:{...n&&{Referer:n},...r&&{"User-Agent":r}}}}function nt(e,t){const n=st(e,t),r={type:ct(t),value:ut(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function rt(e,t,n,r){const a=g(),s=null==a?void 0:a.getOptions().normalizeDepth,o=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),i={__serialized__:v(t,s)};if(o)return{exception:{values:[nt(e,o)]},extra:i};const c={exception:{values:[{type:f(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:pt(t,{isUnhandledRejection:r})}]},extra:i};if(n){const t=st(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function at(e,t){return{exception:{values:[nt(e,t)]}}}function st(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&ot.test(e.message))return 1;return 0}(t),a=function(e){if("number"==typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,a)}catch(an){}return[]}const ot=/Minified React error #\d+;/i;function it(e){return"undefined"!=typeof WebAssembly&&void 0!==WebAssembly.Exception&&e instanceof WebAssembly.Exception}function ct(e){const t=null==e?void 0:e.name;if(!t&&it(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function ut(e){const t=null==e?void 0:e.message;return it(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function dt(e,t,n,r,a){let s;if(u(t)&&t.error){return at(e,t.error)}if(d(t)||l(t)){const a=t;if("stack"in t)s=at(e,t);else{const t=a.name||(d(a)?"DOMError":"DOMException"),i=a.message?`${t}: ${a.message}`:t;s=lt(e,i,n,r),o(s,i)}return"code"in a&&(s.tags={...s.tags,"DOMException.code":`${a.code}`}),s}if(p(t))return at(e,t);if(m(t)||f(t)){return s=rt(e,t,n,a),i(s,{synthetic:!0}),s}return s=lt(e,t,n,r),o(s,`${t}`),i(s,{synthetic:!0}),s}function lt(e,t,n,r){const a={};if(r&&n){const r=st(e,n);r.length&&(a.exception={values:[{value:t,stacktrace:{frames:r}}]}),i(a,{synthetic:!0})}if(h(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return a.logentry={message:e,params:n},a}return a.message=t,a}function pt(e,{isUnhandledRejection:t}){const n=y(e),r=t?"promise rejection":"exception";if(u(e))return`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``;if(f(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(an){}}(e)}\` (type=${e.type}) captured as ${r}`}return`Object captured as ${r} with keys: ${n}`}class mt extends b{constructor(e){const t={parentSpanIsAlwaysRootSpan:!0,...e},n=Ve.SENTRY_SDK_SOURCE||k();S(t,"browser",["browser"],n),super(t);const r=this,{sendDefaultPii:a,_experiments:s}=r._options,o=null==s?void 0:s.enableLogs;t.sendClientReports&&Ve.document&&Ve.document.addEventListener("visibilitychange",(()=>{"hidden"===Ve.document.visibilityState&&(this._flushOutcomes(),o&&T(r))})),o&&(r.on("flush",(()=>{T(r)})),r.on("afterCaptureLog",(()=>{r._logFlushIdleTimeout&&clearTimeout(r._logFlushIdleTimeout),r._logFlushIdleTimeout=setTimeout((()=>{T(r)}),5e3)}))),a&&(r.on("postprocessEvent",x),r.on("beforeSendSession",E))}eventFromException(e,t){return function(e,t,n,r){const a=dt(e,t,(null==n?void 0:n.syntheticException)||void 0,r);return i(a),a.level="error",(null==n?void 0:n.event_id)&&(a.event_id=n.event_id),_(a)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",r,a){const s=lt(e,t,(null==r?void 0:r.syntheticException)||void 0,a);return s.level=n,(null==r?void 0:r.event_id)&&(s.event_id=r.event_id),_(s)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,r)}}function ft(e,t=Ie("fetch")){let n=0,r=0;return w(e,(function(a){const s=a.body.length;n+=s,r++;const o={body:a.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return Fe("fetch"),R("No fetch implementation available");try{return t(e.url,o).then((e=>(n-=s,r--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(an){return Fe("fetch"),n-=s,r--,R(an)}}))}function ht(e,t,n,r){const a={filename:e,function:"<anonymous>"===t?q:t,in_app:!0};return void 0!==n&&(a.lineno=n),void 0!==r&&(a.colno=r),a}const gt=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,vt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,yt=/\((\S*)(?::(\d+))(?::(\d+))\)/,_t=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,bt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,St=P(...[[30,e=>{const t=gt.exec(e);if(t){const[,e,n,r]=t;return ht(e,q,+n,+r)}const n=vt.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){const e=yt.exec(n[2]);e&&(n[2]=e[1],n[3]=e[2],n[4]=e[3])}const[e,t]=Tt(n[1]||q,n[2]);return ht(t,e,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,e=>{const t=_t.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=bt.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||q;return[n,e]=Tt(n,e),ht(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),Tt=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:q,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},xt="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,Et=1024,kt=O(((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:"Breadcrumbs",setup(e){t.console&&L(function(e){return function(t){if(g()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:j(t.level),message:M(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${M(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}D(n,{input:t.args,level:t.level})}}(e)),t.dom&&He(function(e,t){return function(n){if(g()!==e)return;let r,a,s="object"==typeof t?t.serializeAttribute:void 0,o="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;o&&o>Et&&(xt&&I.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=Et),"string"==typeof s&&(s=[s]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=F(t,{keyAttrs:s,maxStringLength:o}),a=H(t)}catch(an){r="<unknown>"}if(0===r.length)return;const i={category:`ui.${n.name}`,message:r};a&&(i.data={"ui.component_name":a}),D(i,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&Me(function(e){return function(t){if(g()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,a=t.xhr[Ne];if(!n||!r||!a)return;const{method:s,url:o,status_code:i,body:c}=a,u={method:s,url:o,status_code:i},d={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r},l={category:"xhr",data:u,type:"http",level:C(i)};e.emit("beforeOutgoingRequestBreadcrumb",l,d),D(l,d)}}(e)),t.fetch&&A(function(e){return function(t){if(g()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const a=t.fetchData,s={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},o={category:"fetch",data:a,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",o,s),D(o,s)}else{const a=t.response,s={...t.fetchData,status_code:null==a?void 0:a.status};t.fetchData.request_body_size,t.fetchData.response_body_size,null==a||a.status;const o={input:t.args,response:a,startTimestamp:n,endTimestamp:r},i={category:"fetch",data:s,type:"http",level:C(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",i,o),D(i,o)}}}(e)),t.history&&je(function(e){return function(t){if(g()!==e)return;let n=t.from,r=t.to;const a=N(Ve.location.href);let s=n?N(n):void 0;const o=N(r);(null==s?void 0:s.path)||(s=a),a.protocol===o.protocol&&a.host===o.host&&(r=o.relative),a.protocol===s.protocol&&a.host===s.host&&(n=s.relative),D({category:"navigation",data:{from:n,to:r}})}}(e)),t.sentry&&e.on("beforeSendEvent",function(e){return function(t){g()===e&&D({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:$(t)},{event:t})}}(e))}}}));const wt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Rt=O(((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:"BrowserApiErrors",setupOnce(){t.setTimeout&&B(Ve,"setTimeout",Pt),t.setInterval&&B(Ve,"setInterval",Pt),t.requestAnimationFrame&&B(Ve,"requestAnimationFrame",qt),t.XMLHttpRequest&&"XMLHttpRequest"in Ve&&B(XMLHttpRequest.prototype,"send",Ot);const e=t.eventTarget;if(e){(Array.isArray(e)?e:wt).forEach(Lt)}}}}));function Pt(e){return function(...t){const n=t[0];return t[0]=et(n,{mechanism:{data:{function:U(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function qt(e){return function(t){return e.apply(this,[et(t,{mechanism:{data:{function:"requestAnimationFrame",handler:U(e)},handled:!1,type:"instrument"}})])}}function Ot(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&B(r,e,(function(t){const r={mechanism:{data:{function:e,handler:U(t)},handled:!1,type:"instrument"}},a=n(t);return a&&(r.mechanism.data.handler=U(a)),et(t,r)}))})),e.apply(this,t)}}function Lt(e){var t,n;const r=null==(t=Ve[e])?void 0:t.prototype;(null==(n=null==r?void 0:r.hasOwnProperty)?void 0:n.call(r,"addEventListener"))&&(B(r,"addEventListener",(function(t){return function(n,r,a){try{"function"==typeof r.handleEvent&&(r.handleEvent=et(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:U(r),target:e},handled:!1,type:"instrument"}}))}catch{}return t.apply(this,[n,et(r,{mechanism:{data:{function:"addEventListener",handler:U(r),target:e},handled:!1,type:"instrument"}}),a])}})),B(r,"removeEventListener",(function(e){return function(t,n,r){try{const a=n.__sentry_wrapped__;a&&e.call(this,t,a,r)}catch(an){}return e.call(this,t,n,r)}})))}const At=O((()=>({name:"BrowserSession",setupOnce(){void 0!==Ve.document?(W({ignoreDuration:!0}),X(),je((({from:e,to:t})=>{void 0!==e&&e!==t&&(W({ignoreDuration:!0}),X())}))):xt&&I.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}}))),Ct=O(((e={})=>{const n={onerror:!0,onunhandledrejection:!0,...e};return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(e){n.onerror&&(!function(e){z((n=>{const{stackParser:r,attachStacktrace:a}=$t();if(g()!==e||Ze())return;const{msg:s,url:o,line:i,column:c,error:u}=n,d=function(e,n,r,a){const s=e.exception=e.exception||{},o=s.values=s.values||[],i=o[0]=o[0]||{},c=i.stacktrace=i.stacktrace||{},u=c.frames=c.frames||[],d=a,l=r,p=J(n)&&n.length>0?n:t();0===u.length&&u.push({colno:d,filename:p,function:q,in_app:!0,lineno:l});return e}(dt(r,u||s,void 0,a,!1),o,i,c);d.level="error",G(d,{originalException:u,mechanism:{handled:!1,type:"onerror"}})}))}(e),Dt("onerror")),n.onunhandledrejection&&(!function(e){Y((t=>{const{stackParser:n,attachStacktrace:r}=$t();if(g()!==e||Ze())return;const a=function(e){if(K(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}(t),s=K(a)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(a)}`}]}}:dt(n,a,void 0,r,!0);s.level="error",G(s,{originalException:a,mechanism:{handled:!1,type:"onunhandledrejection"}})}))}(e),Dt("onunhandledrejection"))}}}));function Dt(e){xt&&I.log(`Global Handler attached: ${e}`)}function $t(){const e=g();return(null==e?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const It=O((()=>({name:"HttpContext",preprocessEvent(e){var t;if(!Ve.navigator&&!Ve.location&&!Ve.document)return;const n=tt(),r={...n.headers,...null==(t=e.request)?void 0:t.headers};e.request={...n,...e.request,headers:r}}}))),Ft=O(((e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,a){const s=a.getOptions();V(nt,s.stackParser,n,t,e,r)}}}));function Ht(e){const t={};for(const n of Object.getOwnPropertyNames(e)){const r=n;void 0!==e[r]&&(t[r]=e[r])}return t}function Mt(e={}){if(!e.skipBrowserExtensionCheck&&function(){if(function(){var e;if(void 0===Ve.window)return!1;const n=Ve;if(n.nw)return!1;const r=n.chrome||n.browser;if(!(null==(e=null==r?void 0:r.runtime)?void 0:e.id))return!1;const a=t(),s=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Ve===Ve.top&&s.some((e=>a.startsWith(`${e}://`))))}())return xt&&te((()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")})),!0}())return;const n=function(e={}){var t;return{defaultIntegrations:[ne(),re(),Rt(),kt(),Ct(),Ft(),ae(),It(),At()],release:"string"==typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null==(t=Ve.SENTRY_RELEASE)?void 0:t.id,sendClientReports:!0,...Ht(e)}}(e),r={...n,stackParser:Z(n.stackParser||St),integrations:Q(n),transport:n.transport||ft};return ee(mt,r)}const jt=new WeakMap,Nt=new Map,Bt={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function Ut(e,n){const{traceFetch:r,traceXHR:a,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:i,tracePropagationTargets:c,onRequestSpanStart:u}={...Bt,...n},d="function"==typeof o?o:e=>!0,l=e=>function(e,n){const r=t();if(r){let t,a;try{t=new URL(e,r),a=new URL(r).origin}catch(an){return!1}const s=t.origin===a;return n?ye(t.toString(),n)||s&&ye(t.pathname,n):s}{const t=!!e.match(/^\/(?!\/)/);return n?ye(e,n):t}}(e,c),p={};r&&(e.addEventProcessor((e=>("transaction"===e.type&&e.spans&&e.spans.forEach((e=>{if("http.client"===e.op){const t=Nt.get(e.span_id);t&&(e.timestamp=t/1e3,Nt.delete(e.span_id))}})),e))),s&&se((e=>{if(e.response){const t=jt.get(e.response);t&&e.endTimestamp&&Nt.set(t,e.endTimestamp)}})),A((e=>{const t=oe(e,d,l,p);if(e.response&&e.fetchData.__span&&jt.set(e.response,e.fetchData.__span),t){const n=zt(e.fetchData.url),r=n?N(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r}),i&&Wt(t),null==u||u(t,{headers:e.headers})}}))),a&&Me((e=>{var t;const n=function(e,t,n,r){const a=e.xhr,s=null==a?void 0:a[Ne];if(!a||a.__sentry_own_request__||!s)return;const{url:o,method:i}=s,c=ue()&&t(o);if(e.endTimestamp&&c){const e=a.__sentry_xhr_span_id__;if(!e)return;const t=r[e];return void(t&&void 0!==s.status_code&&(de(t,s.status_code),t.end(),delete r[e]))}const u=zt(o),d=N(u||o),l=le(o),p=!!pe(),m=c&&p?me({name:`${i} ${l}`,attributes:{url:o,type:"xhr","http.method":i,"http.url":u,"server.address":null==d?void 0:d.host,[he]:"auto.http.browser",[fe]:"http.client",...(null==d?void 0:d.search)&&{"http.query":null==d?void 0:d.search},...(null==d?void 0:d.hash)&&{"http.fragment":null==d?void 0:d.hash}}}):new ge;a.__sentry_xhr_span_id__=m.spanContext().spanId,r[a.__sentry_xhr_span_id__]=m,n(o)&&function(e,t){const{"sentry-trace":n,baggage:r}=ve({span:t});n&&function(e,t,n){var r;const a=null==(r=e.__sentry_xhr_v3__)?void 0:r.request_headers;if(null==a?void 0:a["sentry-trace"])return;try{if(e.setRequestHeader("sentry-trace",t),n){const t=null==a?void 0:a.baggage;t&&t.split(",").some((e=>e.trim().startsWith("sentry-")))||e.setRequestHeader("baggage",n)}}catch(s){}}(e,n,r)}(a,ue()&&p?m:void 0);const f=g();f&&f.emit("beforeOutgoingRequestSpan",m,e);return m}(e,d,l,p);if(n){let r;i&&Wt(n);try{r=new Headers(null==(t=e.xhr.__sentry_xhr_v3__)?void 0:t.request_headers)}catch{}null==u||u(n,{headers:r})}}))}function Wt(e){const{url:t}=ie(e).data;if(!t||"string"!=typeof t)return;const n=Be("resource",(({entries:r})=>{r.forEach((r=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(r)&&r.name.endsWith(t)){(function(e){const{name:t,version:n}=Ue(e.nextHopProtocol),r=[];if(r.push(["network.protocol.version",n],["network.protocol.name",t]),!ce())return r;return[...r,["http.request.redirect_start",Xt(e.redirectStart)],["http.request.fetch_start",Xt(e.fetchStart)],["http.request.domain_lookup_start",Xt(e.domainLookupStart)],["http.request.domain_lookup_end",Xt(e.domainLookupEnd)],["http.request.connect_start",Xt(e.connectStart)],["http.request.secure_connection_start",Xt(e.secureConnectionStart)],["http.request.connection_end",Xt(e.connectEnd)],["http.request.request_start",Xt(e.requestStart)],["http.request.response_start",Xt(e.responseStart)],["http.request.response_end",Xt(e.responseEnd)]]})(r).forEach((t=>e.setAttribute(...t))),setTimeout(n)}}))}))}function Xt(e=0){return((ce()||performance.timeOrigin)+e)/1e3}function zt(e){try{return new URL(e,Ve.location.origin).href}catch{return}}const Yt="sentry_previous_trace",Gt="sentry.previous_trace";function Kt(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r="session-storage"===t;let a=r?function(){var e;try{const t=null==(e=Ve.sessionStorage)?void 0:e.getItem(Yt);return JSON.parse(t)}catch(an){return}}():void 0;e.on("spanStart",(e=>{if(_e(e)!==e)return;const t=Se().getPropagationContext();a=function(e,t,n){const r=ie(t);function a(){var e,t;try{return Number(null==(e=n.dsc)?void 0:e.sample_rate)??Number(null==(t=r.data)?void 0:t[Ee])}catch{return 0}}const s={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:a(),sampleRand:n.sampleRand};if(!e)return s;const o=e.spanContext;if(o.traceId===r.trace_id)return e;Date.now()/1e3-e.startTimestamp<=3600&&(xt&&I.info(`Adding previous_trace ${o} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:o,attributes:{[xe]:"previous_trace"}}),t.setAttribute(Gt,`${o.traceId}-${o.spanId}-${Jt(o)?1:0}`));return s}(a,e,t),r&&function(e){try{Ve.sessionStorage.setItem(Yt,JSON.stringify(e))}catch(an){xt&&I.warn("Could not store previous trace in sessionStorage",an)}}(a)}));let s=!0;n&&e.on("beforeSampling",(e=>{if(!a)return;const t=Se(),n=t.getPropagationContext();s&&n.parentSpanId?s=!1:(t.setPropagationContext({...n,dsc:{...n.dsc,sample_rate:String(a.sampleRate),sampled:String(Jt(a.spanContext))},sampleRand:a.sampleRand}),e.parentSampled=Jt(a.spanContext),e.parentSampleRate=a.sampleRate,e.spanAttributes={...e.spanAttributes,[Te]:a.sampleRate})}))}function Jt(e){return 1===e.traceFlags}const Vt={...we,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...Bt};let Qt=!1;const Zt=(n={})=>{Qt&&te((()=>{console.warn("Multiple browserTracingIntegration instances are not supported.")})),Qt=!0;const r=Ve.document;ke();const{enableInp:a,enableLongTask:s,enableLongAnimationFrame:o,_experiments:{enableInteractions:i,enableStandaloneClsSpans:c},beforeStartSpan:u,idleTimeout:d,finalTimeout:l,childSpanTimeout:p,markBackgroundSpan:m,traceFetch:f,traceXHR:h,trackFetchStreamPerformance:v,shouldCreateSpanForRequest:y,enableHTTPTimings:_,instrumentPageLoad:b,instrumentNavigation:S,linkPreviousTrace:T,consistentTraceSampling:x,onRequestSpanStart:E}={...Vt,...n},k=We({recordClsStandaloneSpans:c||!1});a&&Xe(),o&&e.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?ze():s&&Ye(),i&&Ge();const w={name:void 0,source:void 0};function R(e,t){const n="pageload"===t.op,a=u?u(t):t,s=a.attributes||{};t.name!==a.name&&(s[Le]="custom",a.attributes=s),w.name=a.name,w.source=s[Le];const o=Ae(a,{idleTimeout:d,finalTimeout:l,childSpanTimeout:p,disableAutoFinish:n,beforeSpanEnd:t=>{k(),Je(t,{recordClsOnPageloadSpan:!c}),rn(e,void 0);const n=Se(),r=n.getPropagationContext();n.setPropagationContext({...r,traceId:o.spanContext().traceId,sampled:De(o),dsc:Ce(t)})}});function i(){r&&["interactive","complete"].includes(r.readyState)&&e.emit("idleSpanEnableAutoFinish",o)}rn(e,o),n&&r&&(r.addEventListener("readystatechange",(()=>{i()})),i())}return{name:"BrowserTracing",afterAllSetup(e){let n=t();function r(){const t=nn(e);t&&!ie(t).timestamp&&(xt&&I.log(`[Tracing] Finishing current active span with op: ${ie(t).op}`),t.setAttribute(Oe,"cancelled"),t.end())}if(e.on("startNavigationSpan",(t=>{if(g()!==e)return;r(),Re().setPropagationContext({traceId:Pe(),sampleRand:Math.random()});const n=Se();n.setPropagationContext({traceId:Pe(),sampleRand:Math.random()}),n.setSDKProcessingMetadata({normalizedRequest:void 0}),R(e,{op:"navigation",...t})})),e.on("startPageLoadSpan",((t,n={})=>{if(g()!==e)return;r();const a=n.sentryTrace||en("sentry-trace"),s=n.baggage||en("baggage"),o=qe(a,s),i=Se();i.setPropagationContext(o),i.setSDKProcessingMetadata({normalizedRequest:tt()}),R(e,{op:"pageload",...t})})),"off"!==T&&Kt(e,{linkPreviousTrace:T,consistentTraceSampling:x}),Ve.location){if(b){const t=ce();!function(e,t,n){e.emit("startPageLoadSpan",t,n),Se().setTransactionName(t.name),nn(e)}(e,{name:Ve.location.pathname,startTime:t?t/1e3:void 0,attributes:{[Le]:"url",[he]:"auto.pageload.browser"}})}S&&je((({to:t,from:r})=>{if(void 0===r&&-1!==(null==n?void 0:n.indexOf(t)))return void(n=void 0);n=void 0;const a=$e(t);!function(e,t){e.emit("startNavigationSpan",t),Se().setTransactionName(t.name),nn(e)}(e,{name:(null==a?void 0:a.pathname)||Ve.location.pathname,attributes:{[Le]:"url",[he]:"auto.navigation.browser"}}),Se().setSDKProcessingMetadata({normalizedRequest:{...tt(),url:t}})}))}m&&(Ve.document?Ve.document.addEventListener("visibilitychange",(()=>{const e=pe();if(!e)return;const t=_e(e);if(Ve.document.hidden&&t){const e="cancelled",{op:n,status:r}=ie(t);xt&&I.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus({code:be,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}})):xt&&I.warn("[Tracing] Could not set up background tab detection due to lack of global document")),i&&function(e,t,n,r,a){const s=Ve.document;let o;const i=()=>{const s="ui.action.click",i=nn(e);if(i){const e=ie(i).op;if(["navigation","pageload"].includes(e))return void(xt&&I.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`))}o&&(o.setAttribute(Oe,"interactionInterrupted"),o.end(),o=void 0),a.name?o=Ae({name:a.name,op:s,attributes:{[Le]:a.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r}):xt&&I.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`)};s&&addEventListener("click",i,{once:!1,capture:!0})}(e,d,l,p,w),a&&Ke(),Ut(e,{traceFetch:f,traceXHR:h,trackFetchStreamPerformance:v,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:y,enableHTTPTimings:_,onRequestSpanStart:E})}}};function en(e){const t=Ve.document,n=null==t?void 0:t.querySelector(`meta[name=${e}]`);return(null==n?void 0:n.getAttribute("content"))||void 0}const tn="_sentry_idleSpan";function nn(e){return e[tn]}function rn(e,t){a(e,tn,t)}export{Zt as b,Mt as i};
//# sourceMappingURL=browser-Bk1Xewov.js.map
