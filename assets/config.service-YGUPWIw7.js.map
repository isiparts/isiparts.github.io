{"version":3,"file":"config.service-YGUPWIw7.js","sources":["../../src/services/config.service.ts"],"sourcesContent":["import { Item } from '@/models/menu';\nimport { getApiHost } from '@/services/api.service';\nimport { t } from '@/services/locale.service';\nimport { Options } from 'pusher-js';\n\n/**\n * All configurable options must be defined in the Config interface\n */\nexport interface Config {\n    host: string;\n    home: {\n        header: {\n            image: string;\n        };\n    };\n    aside: {\n        defaultMenu: Item[];\n    };\n    documentSign: {\n        queue: boolean;\n        pusher: {\n            enabled: boolean;\n            key: string;\n            options: Options;\n        };\n    };\n}\n\n/**\n * Configurations are based on the API hostname\n */\nconst CUSTOMIZABLE_CLIENT_SUBDOMAINS: Record<string, () => Config> = {\n    'dev-api.isiparts.com': (): Config => devConfig(),\n    'comabona-api.isiparts.com': (): Config => comabonaConfig(),\n    'millarto-api.isiparts.com': (): Config => millartoConfig(),\n};\n\nconst DEFAULT_SAT_MENU: Item[] = [\n    {\n        id: 1,\n        text: t('MENU.sat'),\n        icon: '',\n        childs: [\n            {\n                id: 2,\n                text: t('WORKORDERS.work_order', 2),\n                icon: 'folder',\n                childs: [{ id: 3, text: t('WORKORDERS.work_order_abbr', 2), icon: '', route: 'or/list' }],\n            },\n        ],\n    },\n];\n\nconst DEFAULT_COMERCIAL_MENU: Item[] = [\n    {\n        id: 4,\n        text: t('MENU.comercial'),\n        icon: 'group',\n        childs: [\n            {\n                id: 5,\n                text: t('MENU.prospect', 2),\n                icon: 'folder',\n                childs: [\n                    { id: 6, text: t('MENU.prospect_edit', 2), icon: 'group', route: 'potencial/list' },\n                    { id: 7, text: t('MENU.prospect_new', 2), icon: 'group', route: 'potencial/new' },\n                ],\n            },\n        ],\n    },\n];\n\n/**\n * Load configuration based on the current API hostname\n */\nexport const loadConfig = (): Config => {\n    const hostname = new URL(getApiHost()).hostname;\n    console.log('hostname', hostname);\n\n    if (hostname in CUSTOMIZABLE_CLIENT_SUBDOMAINS) {\n        return CUSTOMIZABLE_CLIENT_SUBDOMAINS[hostname]();\n    }\n\n    return defaultConfig();\n};\n\n/**\n * This configuration applies to all clients unless overriden\n */\nconst defaultConfig = (): Config => {\n    return {\n        host: new URL(getApiHost()).hostname,\n        home: {\n            header: {\n                image: 'https://res.cloudinary.com/dygtknehl/image/upload/f_auto,q_auto:best/ISIParts_20logo_20home_prqswp',\n            },\n        },\n        aside: {\n            defaultMenu: [],\n        },\n        documentSign: {\n            queue: false,\n            pusher: {\n                enabled: false,\n                key: '',\n                options: {\n                    cluster: 'eu',\n                },\n            },\n        },\n    };\n};\n\n/**\n * Override default configuration for dev-api.isiparts.com\n */\nconst devConfig = (): Config => {\n    const config = defaultConfig();\n    config.home.header.image =\n        'https://res.cloudinary.com/dygtknehl/image/upload/co_rgb:ed772d,l_text:open%20sans_48_bold_normal_left:DEV/fl_layer_apply,g_south_east,x_24,y_24/ISIParts_20logo_20home_prqswp';\n    config.aside.defaultMenu = [...DEFAULT_COMERCIAL_MENU, ...DEFAULT_SAT_MENU];\n\n    config.documentSign.pusher.enabled = true;\n    config.documentSign.pusher.key = '8024737cfc5fca6be712';\n\n    return config;\n};\n\n/**\n * Override default configuration for comabona-api.isiparts.com\n */\nconst comabonaConfig = (): Config => {\n    const config = defaultConfig();\n    config.aside.defaultMenu = DEFAULT_SAT_MENU;\n\n    return config;\n};\n\n/**\n * Override default configuration for millarto-api.isiparts.com\n */\nconst millartoConfig = (): Config => {\n    const config = defaultConfig();\n    config.aside.defaultMenu = DEFAULT_COMERCIAL_MENU;\n\n    return config;\n};\n"],"names":["CUSTOMIZABLE_CLIENT_SUBDOMAINS","devConfig","comabonaConfig","millartoConfig","DEFAULT_SAT_MENU","id","text","t","icon","childs","route","DEFAULT_COMERCIAL_MENU","loadConfig","hostname","URL","getApiHost","console","log","defaultConfig","host","home","header","image","aside","defaultMenu","documentSign","queue","pusher","enabled","key","options","cluster","config"],"mappings":"+bA+BA,MAAMA,EAA+D,CACjE,uBAAwB,IAAcC,IACtC,4BAA6B,IAAcC,IAC3C,4BAA6B,IAAcC,KAGzCC,EAA2B,CAC7B,CACIC,GAAI,EACJC,KAAMC,EAAE,YACRC,KAAM,GACNC,OAAQ,CACJ,CACIJ,GAAI,EACJC,KAAMC,EAAE,wBAAyB,GACjCC,KAAM,SACNC,OAAQ,CAAC,CAAEJ,GAAI,EAAGC,KAAMC,EAAE,6BAA8B,GAAIC,KAAM,GAAIE,MAAO,gBAMvFC,EAAiC,CACnC,CACIN,GAAI,EACJC,KAAMC,EAAE,kBACRC,KAAM,QACNC,OAAQ,CACJ,CACIJ,GAAI,EACJC,KAAMC,EAAE,gBAAiB,GACzBC,KAAM,SACNC,OAAQ,CACJ,CAAEJ,GAAI,EAAGC,KAAMC,EAAE,qBAAsB,GAAIC,KAAM,QAASE,MAAO,kBACjE,CAAEL,GAAI,EAAGC,KAAMC,EAAE,oBAAqB,GAAIC,KAAM,QAASE,MAAO,sBAUvEE,EAAa,KACtB,MAAMC,EAAW,IAAIC,IAAIC,KAAcF,SAGvC,OAFQG,QAAAC,IAAI,WAAYJ,GAEpBA,KAAYb,EACLA,EAA+Ba,KAGnCK,GAAc,EAMnBA,EAAgB,KACX,CACHC,KAAM,IAAIL,IAAIC,KAAcF,SAC5BO,KAAM,CACFC,OAAQ,CACJC,MAAO,uGAGfC,MAAO,CACHC,YAAa,IAEjBC,aAAc,CACVC,OAAO,EACPC,OAAQ,CACJC,SAAS,EACTC,IAAK,GACLC,QAAS,CACLC,QAAS,UAUvB9B,EAAY,KACd,MAAM+B,EAASd,IAQR,OAPAc,EAAAZ,KAAKC,OAAOC,MACf,iLACJU,EAAOT,MAAMC,YAAc,IAAIb,KAA2BP,GAEnD4B,EAAAP,aAAaE,OAAOC,SAAU,EAC9BI,EAAAP,aAAaE,OAAOE,IAAM,uBAE1BG,CAAA,EAML9B,EAAiB,KACnB,MAAM8B,EAASd,IAGR,OAFPc,EAAOT,MAAMC,YAAcpB,EAEpB4B,CAAA,EAML7B,EAAiB,KACnB,MAAM6B,EAASd,IAGR,OAFPc,EAAOT,MAAMC,YAAcb,EAEpBqB,CAAA"}